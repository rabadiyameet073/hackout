<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MangroveWatch Admin Dashboard</title>

   Leaflet CSS (Map) 
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <style>
    :root {
      /* 5-color system (strict) */
      --color-bg: #0b1020;       /* neutral 1 */
      --color-panel: #151a2b;    /* neutral 2 */
      --color-text: #e2e8f0;     /* neutral 3 */
      --color-primary: #39ff14;  /* neon green (brand) */
      --color-accent: #00e5ff;   /* aqua accent */

      --radius: 14px;
      --card-radius: 16px;
      --shadow-1: 0 10px 30px rgba(0, 0, 0, 0.35);
      --shadow-2: 0 6px 18px rgba(0, 0, 0, 0.28);
      --glass: rgba(255, 255, 255, 0.06);
      --glass-strong: rgba(255, 255, 255, 0.12);
      --border: rgba(255, 255, 255, 0.12);
      --muted: rgba(226, 232, 240, 0.7);
      --muted-2: rgba(226, 232, 240, 0.45);
      --focus: 0 0 0 2px rgba(0, 229, 255, 0.65), 0 0 0 4px rgba(57, 255, 20, 0.45);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1400px 800px at -10% -10%, rgba(0,229,255,0.08), transparent 50%),
                  radial-gradient(1200px 700px at 110% -20%, rgba(57,255,20,0.06), transparent 50%),
                  var(--color-bg);
      color: var(--color-text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.55;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Layout */
    .app {
      display: grid;
      grid-template-columns: 280px 1fr;
      grid-template-rows: auto 1fr;
      min-height: 100dvh;
      gap: 16px;
      padding: 16px;
    }

    .sidebar {
      grid-row: 1 / span 2;
      grid-column: 1;
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      backdrop-filter: saturate(140%) blur(14px);
      box-shadow: var(--shadow-1);
      overflow: hidden;
      transition: width 240ms ease, transform 240ms ease;
      width: 280px;
    }
    .sidebar.collapsed { width: 80px; }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 18px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(0,229,255,0.06), transparent);
    }
    .brand .logo {
      display: grid;
      place-items: center;
      width: 42px; height: 42px;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(0,229,255,0.18), rgba(57,255,20,0.18));
      border: 1px solid var(--border);
      box-shadow: inset 0 0 10px rgba(0,229,255,0.35), inset 0 0 18px rgba(57,255,20,0.25);
    }
    .brand h1 {
      font-size: 16px;
      margin: 0;
      letter-spacing: 0.4px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }
    .brand .sub {
      font-size: 12px;
      color: var(--muted);
      font-weight: 500;
      letter-spacing: 0.6px;
    }
    .sidebar.collapsed .brand h1 { display: none; }

    .menu {
      list-style: none;
      padding: 8px;
      margin: 0;
      display: grid;
      gap: 8px;
    }
    .menu li a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 12px;
      border-radius: 12px;
      color: var(--muted);
      text-decoration: none;
      transition: background 160ms ease, color 160ms ease, transform 160ms ease;
      border: 1px solid transparent;
    }
    .menu li a:hover {
      background: var(--glass);
      color: var(--color-text);
      border-color: var(--border);
      transform: translateY(-1px);
    }
    .menu li a.active {
      background: linear-gradient(135deg, rgba(0,229,255,0.16), rgba(57,255,20,0.06));
      color: var(--color-text);
      border-color: rgba(0,229,255,0.35);
      box-shadow: 0 0 0 1px rgba(0,229,255,0.25) inset;
    }
    .icon {
      width: 20px; height: 20px; flex: 0 0 20px; color: var(--muted);
    }
    .sidebar.collapsed .menu .label { display: none; }

    .topbar {
      grid-column: 2;
      grid-row: 1;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      backdrop-filter: saturate(140%) blur(12px);
      box-shadow: var(--shadow-2);
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 12px;
      color: var(--color-text);
      background: linear-gradient(135deg, rgba(0,229,255,0.12), rgba(57,255,20,0.04));
      border: 1px solid rgba(0,229,255,0.35);
      border-radius: 12px;
      cursor: pointer;
      transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 24px rgba(0,229,255,0.15);
    }
    .btn:focus-visible { outline: none; box-shadow: var(--focus); }

    .search {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
      padding: 10px 12px;
      border-radius: 12px;
      background: var(--glass);
      border: 1px solid var(--border);
    }
    .search input {
      flex: 1; background: transparent; border: none; outline: none; color: var(--color-text);
      font-size: 14px;
    }
    .actions {
      display: flex; align-items: center; gap: 10px; margin-left: auto;
    }
    .avatar {
      width: 36px; height: 36px; border-radius: 50%;
      border: 1px solid var(--border);
      background: linear-gradient(135deg, rgba(0,229,255,0.16), rgba(57,255,20,0.06));
      display: grid; place-items: center;
      font-size: 12px; letter-spacing: 0.5px; color: var(--muted);
    }
    .notif {
      position: relative;
    }
    .dot {
      position: absolute; top: 2px; right: 2px; width: 8px; height: 8px; border-radius: 50%;
      background: var(--color-accent); box-shadow: 0 0 8px var(--color-accent);
      transform: scale(1); animation: pulse 1.8s infinite ease-in-out;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(0.9); opacity: 0.9; }
      50% { transform: scale(1.25); opacity: 0.45; }
    }

    .content {
      grid-column: 2;
      grid-row: 2;
      display: grid;
      grid-template-rows: auto auto 1fr auto;
      gap: 16px;
      min-height: 0;
    }

    /* Cards row */
    .cards {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(4, minmax(0, 1fr));
    }
    .card {
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.02));
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      padding: 14px;
      box-shadow: var(--shadow-2);
      backdrop-filter: blur(12px) saturate(140%);
      display: grid; gap: 8px;
      transition: transform 180ms ease, box-shadow 180ms ease;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 16px 40px rgba(0,229,255,0.09); }
    .card .head {
      display: flex; align-items: center; justify-content: space-between; gap: 8px;
      color: var(--muted);
      font-size: 12px;
    }
    .metric {
      display: flex; align-items: baseline; gap: 10px;
    }
    .metric .value {
      font-size: 28px; font-weight: 700; letter-spacing: 0.5px;
      text-shadow: 0 0 12px rgba(57,255,20,0.2);
    }
    .pill {
      font-size: 11px; padding: 4px 8px; border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(0,229,255,0.08);
      color: var(--muted);
    }
    .glow-green { color: var(--color-primary); text-shadow: 0 0 10px rgba(57,255,20,0.35); }
    .glow-aqua { color: var(--color-accent); text-shadow: 0 0 10px rgba(0,229,255,0.4); }

    /* Panels: Map, Table, Charts */
    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow-2);
      backdrop-filter: blur(12px) saturate(140%);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr;
      min-height: 0;
    }
    .panel .panel-head {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 14px; border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(0,229,255,0.06), transparent);
    }
    .panel .title {
      font-size: 14px; letter-spacing: 0.4px; color: var(--muted);
    }

    .map-wrap { position: relative; }
    #map { width: 100%; height: 380px; }
    .legend {
      position: absolute; right: 12px; bottom: 12px; padding: 8px 10px;
      background: rgba(0,0,0,0.35); border: 1px solid var(--border);
      border-radius: 10px; font-size: 12px; color: var(--muted);
      backdrop-filter: blur(8px);
    }
    .legend .dot {
      position: static; display: inline-block; width: 8px; height: 8px; margin-right: 6px;
      border-radius: 50%;
      box-shadow: none; animation: none;
    }
    .dot-green { background: var(--color-primary); }
    .dot-aqua { background: var(--color-accent); }
    .dot-gray { background: rgba(226,232,240,0.7); }

    /* Table */
    .table-wrap { overflow: auto; }
    table { width: 100%; border-collapse: collapse; }
    th, td {
      padding: 12px 12px;
      border-bottom: 1px solid var(--border);
      text-align: left;
      font-size: 14px;
    }
    th {
      position: sticky; top: 0; background: rgba(12,16,32,0.9); backdrop-filter: blur(8px);
      color: var(--muted);
      cursor: pointer;
      user-select: none;
    }
    tr:hover td { background: rgba(255,255,255,0.03); }
    .status {
      display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.04); color: var(--muted);
      font-size: 12px;
    }
    .actions-row { display: flex; gap: 8px; }
    .btn-xs {
      padding: 6px 8px; font-size: 12px; border-radius: 10px;
      border: 1px solid rgba(0,229,255,0.35);
      background: rgba(0,229,255,0.08);
      color: var(--color-text);
      cursor: pointer; transition: transform 150ms ease, background 150ms ease;
    }
    .btn-xs:hover { transform: translateY(-1px); background: rgba(0,229,255,0.14); }

    .filters {
      display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
    }
    select, .page-size {
      background: rgba(255,255,255,0.06);
      border: 1px solid var(--border);
      color: var(--color-text);
      border-radius: 10px;
      padding: 8px 10px;
    }
    .pagination {
      display: flex; align-items: center; justify-content: space-between; gap: 10px;
      padding: 10px 12px; border-top: 1px solid var(--border);
      background: linear-gradient(180deg, transparent, rgba(255,255,255,0.04));
    }
    .pager { display: flex; gap: 8px; align-items: center; }

    /* Charts */
    .charts {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }
    .chart-box {
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.02));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 12px;
      box-shadow: var(--shadow-2);
      min-height: 260px;
    }
    .chart-title {
      font-size: 13px; color: var(--muted); margin: 0 0 8px 0;
    }

    /* Skeleton loading */
    .skeleton {
      position: relative; overflow: hidden;
      background: rgba(255,255,255,0.06);
    }
    .skeleton::after {
      content: "";
      position: absolute; inset: 0;
      transform: translateX(-100%);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
      100% { transform: translateX(100%); }
    }

    /* Responsive */
    @media (max-width: 1100px) {
      .cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      .charts { grid-template-columns: 1fr; }
      #map { height: 320px; }
    }
    @media (max-width: 800px) {
      .app {
        grid-template-columns: 1fr;
      }
      .sidebar {
        position: fixed; z-index: 50; height: calc(100dvh - 32px);
        transform: translateX(-110%);
      }
      .sidebar.open { transform: translateX(0); }
      .topbar { position: sticky; top: 16px; z-index: 40; }
      .cards { grid-template-columns: 1fr; }
    }

    /* Accessibility helpers */
    .sr-only {
      position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden;
      clip: rect(0,0,0,0); white-space: nowrap; border: 0;
    }

  </style>
</head>
<body>
   SVG sprite for icons (no external icon library) 
  <svg class="sr-only" aria-hidden="true" focusable="false">
    <symbol id="i-home" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 3l9 8h-3v9h-5v-6H11v6H6v-9H3l9-8z"/>
    </symbol>
    <symbol id="i-leaf" viewBox="0 0 24 24">
      <path fill="currentColor" d="M5 21q0-3.75 2.625-6.375T14 12q-1.35-1.35-3.125-2.2T7.5 9Q5 9 3 10.5 4.15 6.4 7.1 4.2T14 2q3.35 0 5.675 2.325T22 10q0 4.1-2.2 7.05T13.5 22v-3q-3.1 0-5.3-2.2T5 11v10z"/>
    </symbol>
    <symbol id="i-chart" viewBox="0 0 24 24">
      <path fill="currentColor" d="M3 3h2v18H3V3zm16 8h2v10h-2V11zM11 7h2v14h-2V7z"/>
    </symbol>
    <symbol id="i-users" viewBox="0 0 24 24">
      <path fill="currentColor" d="M16 11c1.66 0 3-1.34 3-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zM8 11c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h10v-3.5C11 14.17 6.33 13 8 13zm8 0c-.29 0-.62.02-.97.05C16.68 13.83 18 14.9 18 16.5V20h6v-1.5C24 14.17 18.33 13 16 13z"/>
    </symbol>
    <symbol id="i-gear" viewBox="0 0 24 24">
      <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.05 7.05 0 0 0-1.63-.95l-.36-2.54A.5.5 0 0 0 14.3 1h-4.6a.5.5 0 0 0-.49.41L8.86 3.95c-.58.23-1.12.54-1.63.95l-2.39-.96a.5.5 0 0 0-.6.22L2.33 7.48a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32c.12.22.38.31.6.22l2.39-.96c.51.41 1.05.72 1.63.95l.36 2.54c.06.23.26.41.49.41h4.6c.23 0 .43-.18.49-.41l.36-2.54c.58-.23 1.12-.54 1.63-.95l2.39.96c.22.09.48 0 .6-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"/>
    </symbol>
    <symbol id="i-bell" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2zm6-6V11A6 6 0 0 0 6 11v5l-2 2v1h16v-1l-2-2z"/>
    </symbol>
    <symbol id="i-search" viewBox="0 0 24 24">
      <path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79L20 21.49 21.49 20 15.5 14zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"/>
    </symbol>
    <symbol id="i-menu" viewBox="0 0 24 24">
      <path fill="currentColor" d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/>
    </symbol>
    <symbol id="i-check" viewBox="0 0 24 24">
      <path fill="currentColor" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/>
    </symbol>
    <symbol id="i-x" viewBox="0 0 24 24">
      <path fill="currentColor" d="M18.3 5.71 12 12l6.3 6.29-1.41 1.41L10.59 13.41 4.3 19.71 2.89 18.3 9.17 12 2.89 5.71 4.3 4.3l6.29 6.29 6.29-6.29z"/>
    </symbol>
    <symbol id="i-alert" viewBox="0 0 24 24">
      <path fill="currentColor" d="M1 21h22L12 2 1 21zm12-3h-2v2h2v-2zm0-8h-2v6h2V10z"/>
    </symbol>
  </svg>

  <div class="app" id="appRoot" aria-busy="true">
     Sidebar 
    <aside class="sidebar" id="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true">
           simple leaf glyph 
          <svg width="22" height="22" viewBox="0 0 24 24" class="glow-aqua" aria-hidden="true">
            <use href="#i-leaf"></use>
          </svg>
        </div>
        <h1>
          <span>MangroveWatch Admin</span>
          <span class="sub">Hackathon Edition</span>
        </h1>
      </div>
      <ul class="menu" role="menu">
        <li><a class="active" href="#" role="menuitem" aria-current="page"><svg class="icon"><use href="#i-home"></use></svg><span class="label">Dashboard</span></a></li>
        <li><a href="#" role="menuitem"><svg class="icon"><use href="#i-leaf"></use></svg><span class="label">Reports</span></a></li>
        <li><a href="#" role="menuitem"><svg class="icon"><use href="#i-chart"></use></svg><span class="label">Analytics</span></a></li>
        <li><a href="#" role="menuitem"><svg class="icon"><use href="#i-users"></use></svg><span class="label">Community</span></a></li>
        <li><a href="#" role="menuitem"><svg class="icon"><use href="#i-gear"></use></svg><span class="label">Settings</span></a></li>
      </ul>
    </aside>

     Topbar 
    <header class="topbar" aria-label="Top navigation">
      <button class="btn" id="toggleSidebar" aria-expanded="true" aria-controls="sidebar">
        <svg class="icon"><use href="#i-menu"></use></svg>
        <span class="hide-sm">Menu</span>
      </button>

      <div class="search" role="search">
        <svg class="icon"><use href="#i-search"></use></svg>
        <input id="searchInput" type="search" placeholder="Search reports, users, locations..." aria-label="Search" />
      </div>

      <div class="actions">
        <button class="btn notif" id="notifBtn" aria-label="Notifications">
          <svg class="icon"><use href="#i-bell"></use></svg>
          <span class="dot" id="notifDot" aria-hidden="true"></span>
        </button>
        <div class="avatar" aria-label="Admin profile">ADMIN</div>
      </div>
    </header>

     Content 
    <main class="content">
       Quick Stats 
      <section class="cards" id="cardsRow">
        <article class="card" aria-live="polite">
          <div class="head">
            <span>Total Reports</span>
            <span class="pill">Live</span>
          </div>
          <div class="metric">
            <span class="value glow-green" id="stat-total">—</span>
            <small class="muted" id="stat-total-change">+0%</small>
          </div>
        </article>

        <article class="card">
          <div class="head">
            <span>Verified Cases</span>
            <span class="pill">Reviewed</span>
          </div>
          <div class="metric">
            <span class="value glow-green" id="stat-verified">—</span>
            <small class="muted" id="stat-verified-change">+0%</small>
          </div>
        </article>

        <article class="card">
          <div class="head">
            <span>Urgent Alerts</span>
            <span class="pill">Priority</span>
          </div>
          <div class="metric">
            <span class="value glow-aqua" id="stat-urgent">—</span>
            <small class="muted" id="stat-urgent-change">0 new</small>
          </div>
        </article>

        <article class="card">
          <div class="head">
            <span>Volunteers Active</span>
            <span class="pill">Community</span>
          </div>
          <div class="metric">
            <span class="value glow-aqua" id="stat-volunteers">—</span>
            <small class="muted" id="stat-volunteers-change">today</small>
          </div>
        </article>
      </section>

       Interactive Map 
      <section class="panel">
        <div class="panel-head">
          <h2 class="title">Report Locations Map</h2>
          <div class="filters">
            <label class="sr-only" for="statusFilter">Status</label>
            <select id="statusFilter" aria-label="Filter by status">
              <option value="ALL">All statuses</option>
              <option value="Pending">Pending</option>
              <option value="Verified">Verified</option>
              <option value="Urgent">Urgent</option>
            </select>
            <label class="sr-only" for="regionFilter">Region</label>
            <select id="regionFilter" aria-label="Filter by region">
              <option value="ALL">All regions</option>
            </select>
          </div>
        </div>
        <div class="map-wrap">
          <div id="map" class="skeleton" role="region" aria-label="Reports map"></div>
          <div class="legend" aria-hidden="true">
            <div><span class="dot dot-green"></span>Verified</div>
            <div><span class="dot dot-aqua"></span>Urgent</div>
            <div><span class="dot dot-gray"></span>Pending</div>
          </div>
        </div>
      </section>

       Reports Table 
      <section class="panel" aria-label="Reports table">
        <div class="panel-head">
          <h2 class="title">User Submissions</h2>
          <div class="filters">
            <label for="pageSize" class="sr-only">Rows per page</label>
            <select id="pageSize" class="page-size" aria-label="Rows per page">
              <option>8</option>
              <option>12</option>
              <option>20</option>
            </select>
          </div>
        </div>
        <div class="table-wrap" id="tableWrap">
          <table>
            <thead>
              <tr>
                <th data-sort="id">ID</th>
                <th data-sort="user">User</th>
                <th>Image</th>
                <th data-sort="location">Location</th>
                <th data-sort="status">Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="tableBody">
               rows injected 
            </tbody>
          </table>
        </div>
        <div class="pagination">
          <div class="pager">
            <button class="btn-xs" id="prevPage">Prev</button>
            <span id="pageInfo" aria-live="polite">Page 1 of 1</span>
            <button class="btn-xs" id="nextPage">Next</button>
          </div>
          <div class="muted" id="resultCount">0 results</div>
        </div>
      </section>

       Charts 
      <section class="charts" aria-label="Analytics">
        <div class="chart-box">
          <h3 class="chart-title">Reports per Region (Bar)</h3>
          <canvas id="barRegion"></canvas>
        </div>
        <div class="chart-box">
          <h3 class="chart-title">Reports over Time (Line)</h3>
          <canvas id="lineTime"></canvas>
        </div>
        <div class="chart-box">
          <h3 class="chart-title">Verified vs Pending (Pie)</h3>
          <canvas id="pieStatus"></canvas>
        </div>
      </section>
    </main>
  </div>

   Leaflet JS 
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>
   Chart.js 
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>

  <script>
    // State
    let reports = [];
    let filtered = [];
    let markersLayer;
    let map;
    let sortBy = 'id';
    let sortDir = 'asc';
    let currentPage = 1;
    let pageSize = 8;

    // Charts
    let barChart, lineChart, pieChart;

    // Utils
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    // Mock data fetch
    function mockFetchReports() {
      const seed = [
        { id: 101, user: 'Alice',   lat: 14.5995, lng: 120.9842, region: 'Metro Manila',   location: 'Manila Bay', status: 'Pending',  date: '2025-08-19', volunteers: 5, img: null },
        { id: 102, user: 'Ramon',   lat: 13.7563, lng: 121.0583, region: 'Calabarzon',     location: 'Tayabas Bay', status: 'Verified', date: '2025-08-18', volunteers: 3, img: null },
        { id: 103, user: 'Siti',    lat: 1.3521,  lng: 103.8198, region: 'Singapore',      location: 'Sungei Buloh', status: 'Urgent',  date: '2025-08-20', volunteers: 8, img: null },
        { id: 104, user: 'Anil',    lat: 19.0760, lng: 72.8777,  region: 'Maharashtra',    location: 'Thane Creek', status: 'Verified', date: '2025-08-17', volunteers: 4, img: null },
        { id: 105, user: 'Maya',    lat: -6.2088, lng: 106.8456, region: 'Jakarta',        location: 'Angke Kapuk', status: 'Pending',  date: '2025-08-21', volunteers: 6, img: null },
        { id: 106, user: 'Bao',     lat: 10.8231, lng: 106.6297, region: 'Ho Chi Minh',    location: 'Can Gio',     status: 'Urgent',  date: '2025-08-22', volunteers: 7, img: null },
        { id: 107, user: 'Lina',    lat: 24.7136, lng: 46.6753,  region: 'Riyadh',         location: 'Wadi Hanifa', status: 'Pending',  date: '2025-08-16', volunteers: 2, img: null },
        { id: 108, user: 'Diego',   lat: -12.0464,lng: -77.0428, region: 'Lima',           location: 'Manglares',   status: 'Verified', date: '2025-08-15', volunteers: 5, img: null },
        { id: 109, user: 'Sara',    lat: 25.2048, lng: 55.2708,  region: 'Dubai',          location: 'Ras Al Khor', status: 'Pending',  date: '2025-08-12', volunteers: 4, img: null },
        { id: 110, user: 'Kenji',   lat: 35.6762, lng: 139.6503, region: 'Tokyo',          location: 'Tokyo Bay',   status: 'Verified', date: '2025-08-10', volunteers: 3, img: null },
        { id: 111, user: 'Aisha',   lat: 24.4539, lng: 54.3773,  region: 'Abu Dhabi',      location: 'Eastern Mangroves', status: 'Urgent', date: '2025-08-20', volunteers: 6, img: null },
        { id: 112, user: 'Noah',    lat: -33.8688,lng: 151.2093, region: 'Sydney',         location: 'Homebush Bay', status: 'Verified', date: '2025-08-05', volunteers: 5, img: null },
        { id: 113, user: 'Fatima',  lat: 23.8859, lng: 45.0792,  region: 'Saudi Arabia',   location: 'Jazan',       status: 'Pending',  date: '2025-08-14', volunteers: 2, img: null },
        { id: 114, user: 'Omar',    lat: 29.3759, lng: 47.9774,  region: 'Kuwait',         location: 'Doha Bay',    status: 'Verified', date: '2025-08-13', volunteers: 2, img: null },
        { id: 115, user: 'Ivy',     lat: 22.3193, lng: 114.1694, region: 'Hong Kong',      location: 'Mai Po',      status: 'Pending',  date: '2025-08-09', volunteers: 3, img: null },
        { id: 116, user: 'Luis',    lat: 9.7489,  lng: -83.7534, region: 'Costa Rica',     location: 'Sierpe',      status: 'Verified', date: '2025-08-03', volunteers: 7, img: null },
        { id: 117, user: 'Marta',   lat: 41.3851, lng: 2.1734,   region: 'Barcelona',      location: 'Llobregat',   status: 'Pending',  date: '2025-08-02', volunteers: 1, img: null },
        { id: 118, user: 'Ravi',    lat: 8.5241,  lng: 76.9366,  region: 'Kerala',         location: 'Vembanad',    status: 'Verified', date: '2025-08-01', volunteers: 4, img: null },
        { id: 119, user: 'Nadia',   lat: -2.170998, lng: -79.922359, region: 'Guayaquil', location: 'Churute',     status: 'Urgent',  date: '2025-08-23', volunteers: 9, img: null },
        { id: 120, user: 'Jon',     lat: 52.5200, lng: 13.4050,  region: 'Berlin',         location: 'Spree Delta', status: 'Pending',  date: '2025-08-11', volunteers: 2, img: null },
      ];
      // Add tiny placeholder image for each
      return seed.map(r => ({
        ...r,
        img: 'data:image/svg+xml;utf8,' + encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="80" height="56"><rect width="100%" height="100%" fill="#151a2b"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#e2e8f0" font-size="10" font-family="Arial">IMG ${r.id}</text></svg>`)
      }));
    }

    // Map
    function initMap() {
      map = L.map('map', { scrollWheelZoom: true });
      const base = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        minZoom: 2,
        maxZoom: 19,
        attribution: '&copy; OpenStreetMap'
      });
      base.addTo(map);
      map.setView([14.5, 121.0], 3);
      markersLayer = L.layerGroup().addTo(map);
      $('#map').classList.remove('skeleton');
    }

    function statusColor(status) {
      if (status === 'Verified') return '#39ff14';     // primary
      if (status === 'Urgent') return '#00e5ff';       // accent
      return 'rgba(226,232,240,0.85)';                 // neutral
    }

    function updateMap() {
      markersLayer.clearLayers();
      filtered.forEach(r => {
        const marker = L.circleMarker([r.lat, r.lng], {
          radius: 7,
          color: statusColor(r.status),
          fillColor: statusColor(r.status),
          fillOpacity: 0.85,
          weight: 2
        });
        const popupHtml = `
          <div style="min-width:220px">
            <div style="display:flex;gap:10px;align-items:center;margin-bottom:8px">
              <img src="${r.img}" alt="Report ${r.id} image" style="width:70px;height:48px;border-radius:8px;border:1px solid rgba(255,255,255,0.12)" />
              <div>
                <div style="font-weight:700">#${r.id} • ${r.location}</div>
                <div style="opacity:.8;font-size:12px">${r.region}</div>
                <div style="margin-top:4px;font-size:12px;display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,0.12);border-radius:999px;padding:2px 8px;background:rgba(255,255,255,0.04)">${r.status}</div>
              </div>
            </div>
            <div style="display:flex;gap:6px">
              <button data-id="${r.id}" class="popup-verify" style="padding:6px 8px;border-radius:8px;border:1px solid rgba(0,229,255,0.35);background:rgba(0,229,255,0.08);color:#e2e8f0;cursor:pointer">Verify</button>
              <button data-id="${r.id}" class="popup-reject" style="padding:6px 8px;border-radius:8px;border:1px solid rgba(0,229,255,0.35);background:rgba(0,229,255,0.08);color:#e2e8f0;cursor:pointer">Reject</button>
            </div>
          </div>
        `;
        marker.bindPopup(popupHtml);
        marker.addTo(markersLayer);
      });
    }

    // Table
    function renderTable() {
      const tbody = $('#tableBody');
      tbody.innerHTML = '';

      // sorting
      filtered.sort((a, b) => {
        const mul = sortDir === 'asc' ? 1 : -1;
        let va = a[sortBy], vb = b[sortBy];
        if (typeof va === 'string') va = va.toLowerCase();
        if (typeof vb === 'string') vb = vb.toLowerCase();
        if (va < vb) return -1 * mul;
        if (va > vb) return 1 * mul;
        return 0;
      });

      // pagination
      const total = filtered.length;
      const pages = Math.max(1, Math.ceil(total / pageSize));
      currentPage = Math.min(currentPage, pages);
      const start = (currentPage - 1) * pageSize;
      const slice = filtered.slice(start, start + pageSize);

      slice.forEach(r => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>#${r.id}</td>
          <td>${r.user}</td>
          <td><img src="${r.img}" alt="Report ${r.id} image" width="64" height="44" style="border-radius:8px;border:1px solid rgba(255,255,255,0.12)" /></td>
          <td>${r.location}<div style="opacity:.7;font-size:12px">${r.region}</div></td>
          <td><span class="status">${r.status}</span></td>
          <td>
            <div class="actions-row">
              <button class="btn-xs" data-act="verify" data-id="${r.id}"><svg class="icon"><use href="#i-check"></use></svg>Verify</button>
              <button class="btn-xs" data-act="reject" data-id="${r.id}"><svg class="icon"><use href="#i-x"></use></svg>Reject</button>
            </div>
          </td>
        `;
        tbody.appendChild(tr);
      });

      $('#pageInfo').textContent = `Page ${currentPage} of ${Math.max(1, Math.ceil(total / pageSize))}`;
      $('#resultCount').textContent = `${total} results`;
      $('#prevPage').disabled = currentPage <= 1;
      $('#nextPage').disabled = currentPage >= Math.ceil(total / pageSize);
    }

    function attachTableEvents() {
      // sort handlers
      $$('th[data-sort]').forEach(th => {
        th.addEventListener('click', () => {
          const key = th.getAttribute('data-sort');
          if (sortBy === key) {
            sortDir = sortDir === 'asc' ? 'desc' : 'asc';
          } else {
            sortBy = key; sortDir = 'asc';
          }
          renderTable();
        });
      });

      // pagination
      $('#prevPage').addEventListener('click', () => {
        if (currentPage > 1) { currentPage--; renderTable(); }
      });
      $('#nextPage').addEventListener('click', () => {
        const pages = Math.ceil(filtered.length / pageSize);
        if (currentPage < pages) { currentPage++; renderTable(); }
      });

      $('#pageSize').addEventListener('change', (e) => {
        pageSize = parseInt(e.target.value, 10); currentPage = 1; renderTable();
      });

      // row actions (event delegation)
      $('#tableBody').addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-act]');
        if (!btn) return;
        const id = Number(btn.getAttribute('data-id'));
        if (btn.getAttribute('data-act') === 'verify') updateStatus(id, 'Verified');
        if (btn.getAttribute('data-act') === 'reject') updateStatus(id, 'Pending');
      });
    }

    // Filters/Search
    function applyFilters() {
      const q = $('#searchInput').value.trim().toLowerCase();
      const s = $('#statusFilter').value;
      const reg = $('#regionFilter').value;

      filtered = reports.filter(r => {
        const matchesText = !q || [r.user, r.location, r.region].some(v => v.toLowerCase().includes(q));
        const matchesStatus = (s === 'ALL') || (r.status === s);
        const matchesRegion = (reg === 'ALL') || (r.region === reg);
        return matchesText && matchesStatus && matchesRegion;
      });

      currentPage = 1;
      renderStats();
      renderTable();
      updateMap();
      updateCharts();
    }

    // Stats
    function renderStats() {
      const total = filtered.length;
      const verified = filtered.filter(r => r.status === 'Verified').length;
      const urgent = filtered.filter(r => r.status === 'Urgent').length;
      const volunteers = new Set(filtered.map(r => r.user)).size + Math.floor(total / 4); // playful metric

      $('#stat-total').textContent = total;
      $('#stat-verified').textContent = verified;
      $('#stat-urgent').textContent = urgent;
      $('#stat-volunteers').textContent = volunteers;

      // Simple deltas (fake for demo)
      $('#stat-total-change').textContent = '+' + Math.max(0, Math.round((total / (reports.length || 1)) * 10)) + '%';
      $('#stat-verified-change').textContent = '+' + Math.max(0, Math.round((verified / (reports.length || 1)) * 10)) + '%';
      $('#stat-urgent-change').textContent = urgent + ' new';
      $('#stat-volunteers-change').textContent = 'today';
    }

    // Charts
    function ensureCharts() {
      const common = {
        animation: { duration: 600 },
        plugins: { legend: { labels: { color: '#e2e8f0' } } },
        scales: {
          x: { ticks: { color: '#e2e8f0' }, grid: { color: 'rgba(226,232,240,0.08)' } },
          y: { ticks: { color: '#e2e8f0' }, grid: { color: 'rgba(226,232,240,0.08)' } },
        }
      };
      const c1 = document.getElementById('barRegion');
      const c2 = document.getElementById('lineTime');
      const c3 = document.getElementById('pieStatus');

      barChart = new Chart(c1, { type: 'bar', data: { labels: [], datasets: [] }, options: common });
      lineChart = new Chart(c2, { type: 'line', data: { labels: [], datasets: [] }, options: common });
      pieChart = new Chart(c3, { type: 'pie', data: { labels: [], datasets: [] }, options: { animation: { duration: 600 }, plugins: { legend: { labels: { color: '#e2e8f0' } } } } });
    }

    function updateCharts() {
      // Bar: per region
      const byRegion = {};
      filtered.forEach(r => { byRegion[r.region] = (byRegion[r.region] || 0) + 1; });
      const regions = Object.keys(byRegion);
      const regionCounts = regions.map(k => byRegion[k]);

      barChart.data.labels = regions;
      barChart.data.datasets = [{
        label: 'Reports',
        data: regionCounts,
        backgroundColor: 'rgba(0,229,255,0.35)',
        borderColor: '#00e5ff',
        borderWidth: 1.5
      }];
      barChart.update();

      // Line: over time (by date)
      const byDate = {};
      filtered.forEach(r => { byDate[r.date] = (byDate[r.date] || 0) + 1; });
      const dates = Object.keys(byDate).sort();
      const dateCounts = dates.map(d => byDate[d]);

      lineChart.data.labels = dates;
      lineChart.data.datasets = [{
        label: 'Reports',
        data: dateCounts,
        tension: 0.35,
        fill: true,
        backgroundColor: 'rgba(57,255,20,0.18)',
        borderColor: '#39ff14',
        pointRadius: 3,
        pointBackgroundColor: '#39ff14'
      }];
      lineChart.update();

      // Pie: Verified vs Pending (Urgent grouped separately but we keep 3 segments max)
      const verified = filtered.filter(r => r.status === 'Verified').length;
      const pending = filtered.filter(r => r.status === 'Pending').length;
      const urgent = filtered.filter(r => r.status === 'Urgent').length;

      pieChart.data.labels = ['Verified', 'Pending', 'Urgent'];
      pieChart.data.datasets = [{
        data: [verified, pending, urgent],
        backgroundColor: ['#39ff14', 'rgba(226,232,240,0.85)', '#00e5ff'],
        borderColor: ['#39ff14', 'rgba(226,232,240,0.85)', '#00e5ff'],
        borderWidth: 1
      }];
      pieChart.update();
    }

    // Actions
    function updateStatus(id, newStatus) {
      const r = reports.find(x => x.id === id);
      if (!r) return;
      r.status = newStatus;
      applyFilters();
    }

    // Populate Region filter
    function populateRegions() {
      const regions = Array.from(new Set(reports.map(r => r.region))).sort();
      const sel = $('#regionFilter');
      sel.innerHTML = '<option value="ALL">All regions</option>' + regions.map(r => `<option>${r}</option>`).join('');
    }

    // Event bindings
    function bindEvents() {
      $('#toggleSidebar').addEventListener('click', () => {
        const sidebar = $('#sidebar');
        const isSmall = window.matchMedia('(max-width: 800px)').matches;
        if (isSmall) {
          sidebar.classList.toggle('open');
          const expanded = sidebar.classList.contains('open');
          $('#toggleSidebar').setAttribute('aria-expanded', expanded ? 'true' : 'false');
        } else {
          sidebar.classList.toggle('collapsed');
          const expanded = !sidebar.classList.contains('collapsed');
          $('#toggleSidebar').setAttribute('aria-expanded', expanded ? 'true' : 'false');
        }
      });

      $('#notifBtn').addEventListener('click', () => {
        $('#notifDot')?.remove();
      });

      $('#searchInput').addEventListener('input', debounce(applyFilters, 150));
      $('#statusFilter').addEventListener('change', applyFilters);
      $('#regionFilter').addEventListener('change', applyFilters);

      // Handle verify/reject inside map popup
      map.on('popupopen', (e) => {
        const node = e.popup.getElement();
        node.querySelector('.popup-verify')?.addEventListener('click', (ev) => {
          const id = Number(ev.target.closest('button').getAttribute('data-id'));
          updateStatus(id, 'Verified');
          map.closePopup();
        });
        node.querySelector('.popup-reject')?.addEventListener('click', (ev) => {
          const id = Number(ev.target.closest('button').getAttribute('data-id'));
          updateStatus(id, 'Pending');
          map.closePopup();
        });
      });
    }

    function debounce(fn, ms) {
      let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(null, args), ms); };
    }

    // Init
    window.addEventListener('DOMContentLoaded', async () => {
      // Simulate loading
      initMap();
      reports = mockFetchReports();
      filtered = reports.slice();
      populateRegions();

      // Build charts and table
      ensureCharts();
      attachTableEvents();

      // First render
      renderStats();
      updateMap();
      renderTable();
      updateCharts();

      bindEvents();

      // Remove busy state
      document.getElementById('appRoot').removeAttribute('aria-busy');
    });
  </script>
</body>
</html>
